(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{258:function(e,t,n){e.exports=n(547)},500:function(e,t,n){},501:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},502:function(e,t,n){},531:function(e,t){},547:function(e,t,n){"use strict";n.r(t);n(259),n(187),n(308);var o,a=n(0),l=n.n(a),i=n(17),r=n.n(i),s=(n(500),n(501),n(502),n(123)),c=n(60),u=n(130),p=n(124),m=n(129),h=n(88),d=n(34),f=n(43),v=n(50),g="pencil",b="Test WRITE TEXT",y=(o={},Object(f.a)(o,g,function(e){var t=null,n=[],o=function(t,n,o){var a=o.x,l=o.y;e.save(),e.lineJoin="round",e.lineCap="round",e.beginPath(),e.lineWidth=t.size,e.strokeStyle=t.color,e.globalCompositeOperation="source-over",e.moveTo(n.x,n.y),e.lineTo(a,l),e.closePath(),e.stroke(),e.restore()},a=function(e,a){if(!t)return[];var l={x:e,y:a},i=t.points.slice(-1)[0];return o(t,i,l),t.points.push(l),n.push(l),[t]};return{onMouseDown:function(e,n,o,a){return[t={id:Object(v.v4)(),tool:g,color:o,size:a,points:[{x:e,y:n}]}]},onMouseMove:a,onDebouncedMouseMove:function(){var e=n;return n=[],[t,e]},onMouseUp:function(e,o){if(t){a(e,o),n=[];var l=t;return t=null,[l]}},draw:function(e,t){for(var n=0,a=0,l=e.points.length;a<l;a++)e.points[a-1]&&(t?(setTimeout(o.bind(null,e,e.points[a-1],e.points[a]),n),n+=10):o(e,e.points[a-1],e.points[a]))}}}),Object(f.a)(o,"line",function(e){var t=null,n=null,o=function(t,n,o){e.save(),e.lineJoin="round",e.lineCap="round",e.beginPath(),e.lineWidth=t.size,e.strokeStyle=t.color,e.globalCompositeOperation="source-over",e.moveTo(t.start.x,t.start.y),e.lineTo(n,o),e.closePath(),e.stroke(),e.restore()},a=function(a,l){t&&(e.putImageData(n,0,0),o(t,a,l))};return{onMouseDown:function(o,a,l,i){return t={id:Object(v.v4)(),tool:"line",color:l,size:i,start:{x:o,y:a},end:null},n=e.getImageData(0,0,e.canvas.clientWidth,e.canvas.clientHeight),[t]},onMouseMove:a,onMouseUp:function(e,o){if(t){a(e,o);var l=t;return n=null,t=null,l.end={x:e,y:o},[l]}},draw:function(e){return o(e,e.end.x,e.end.y)}}}),Object(f.a)(o,"rectangle",function(e){var t=null,n=null,o=function(t,n,o){var a=n<t.start.x?n:t.start.x,l=o<t.start.y?o:t.start.y,i=Math.abs(t.start.x-n),r=Math.abs(t.start.y-o);e.beginPath(),e.lineWidth=t.size,e.strokeStyle=t.color,e.fillStyle=t.fill,e.rect(a,l,i,r),e.stroke(),t.fill&&e.fill()},a=function(a,l){t&&(e.putImageData(n,0,0),e.save(),o(t,a,l),e.restore())};return{onMouseDown:function(o,a,l,i,r){return t={id:Object(v.v4)(),tool:"rectangle",color:l,size:i,fill:r,start:{x:o,y:a},end:null},n=e.getImageData(0,0,e.canvas.clientWidth,e.canvas.clientHeight),[t]},onMouseMove:a,onMouseUp:function(e,o){if(t){a(e,o);var l=t;return n=null,t=null,l.end={x:e,y:o},[l]}},draw:function(e){return o(e,e.end.x,e.end.y)}}}),Object(f.a)(o,"ellipse",function(e){var t=null,n=null,o=function(t,n,o){var a=n<t.start.x?n:t.start.x,l=o<t.start.y?o:t.start.y,i=.5*((n>=t.start.x?n:t.start.x)-a),r=.5*((o>=t.start.y?o:t.start.y)-l),s=a+i,c=l+r;e.save(),e.beginPath(),e.lineWidth=t.size,e.strokeStyle=t.color,e.fillStyle=t.fill,"function"===typeof e.ellipse?e.ellipse(s,c,i,r,0,0,2*Math.PI):function(t,n,o,a){for(var l,i,r=0;r<2*Math.PI;r+=.01)l=t-a*Math.sin(r)*Math.sin(0)+o*Math.cos(r)*Math.cos(0),i=n+o*Math.cos(r)*Math.sin(0)+a*Math.sin(r)*Math.cos(0),0===r?e.moveTo(l,i):e.lineTo(l,i)}(s,c,i,r),e.stroke(),t.fill&&e.fill(),e.closePath(),e.restore()},a=function(a,l){t&&(e.putImageData(n,0,0),o(t,a,l))};return{onMouseDown:function(o,a,l,i,r){return t={id:Object(v.v4)(),tool:"ellipse",color:l,size:i,fill:r,start:{x:o,y:a},end:null},n=e.getImageData(0,0,e.canvas.clientWidth,e.canvas.clientHeight),[t]},onMouseMove:a,onMouseUp:function(e,o){if(t){a(e,o);var l=t;return n=null,t=null,l.end={x:e,y:o},[l]}},draw:function(e){return o(e,e.end.x,e.end.y)}}}),Object(f.a)(o,"text",function(e){var t=null,n=null,o=function(t,n,o){var a=n<t.start.x?n:t.start.x,l=o<t.start.y?o:t.start.y;e.beginPath(),e.lineWidth=t.size,e.strokeStyle=t.color,e.fillStyle=t.fill,e.stroke(),t.fillText&&e.fillText(t.fillText,a,l)},a=function(a,l){t&&(e.putImageData(n,0,0),e.save(),o(t,a,l),e.restore())};return{onMouseDown:function(o,a,l,i,r,s){return t={id:Object(v.v4)(),tool:"text",color:l,size:i,fill:r,fillText:s||b,start:{x:o,y:a},end:null},n=e.getImageData(0,0,e.canvas.clientWidth,e.canvas.clientHeight),[t]},onMouseMove:a,onMouseUp:function(e,o){if(t){a(e,o);var l=t;return n=null,t=null,l.end={x:e,y:o},[l]}},draw:function(e){return o(e,e.end.x,e.end.y)}}}),o),E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).tool=null,n.interval=null,n.initTool=n.initTool.bind(Object(d.a)(n)),n.onMouseDown=n.onMouseDown.bind(Object(d.a)(n)),n.onMouseMove=n.onMouseMove.bind(Object(d.a)(n)),n.onDebouncedMove=n.onDebouncedMove.bind(Object(d.a)(n)),n.onMouseUp=n.onMouseUp.bind(Object(d.a)(n)),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.canvas=Object(i.findDOMNode)(this.canvasRef),this.ctx=this.canvas.getContext("2d"),this.initTool(this.props.tool)}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.tool;e.items.filter(function(e){return-1===t.props.items.indexOf(e)}).forEach(function(e){t.initTool(e.tool),t.tool.draw(e,t.props.animate)}),this.initTool(n)}},{key:"initTool",value:function(e){this.tool=this.props.toolsMap[e](this.ctx)}},{key:"onMouseDown",value:function(e){var t,n=(t=this.tool).onMouseDown.apply(t,Object(h.a)(this.getCursorPosition(e)).concat([this.props.color,this.props.size,this.props.fillColor,this.props.fillText]));n&&n[0]&&this.props.onItemStart&&this.props.onItemStart.apply(null,n),this.props.onDebouncedItemChange&&(this.interval=setInterval(this.onDebouncedMove,this.props.debounceTime))}},{key:"onDebouncedMove",value:function(){"function"==typeof this.tool.onDebouncedMouseMove&&this.props.onDebouncedItemChange&&this.props.onDebouncedItemChange.apply(null,this.tool.onDebouncedMouseMove())}},{key:"onMouseMove",value:function(e){var t,n=(t=this.tool).onMouseMove.apply(t,Object(h.a)(this.getCursorPosition(e)));n&&n[0]&&this.props.onEveryItemChange&&this.props.onEveryItemChange.apply(null,n)}},{key:"onMouseUp",value:function(e){var t,n=(t=this.tool).onMouseUp.apply(t,Object(h.a)(this.getCursorPosition(e)));n&&n[0]&&this.props.onCompleteItem&&this.props.onCompleteItem.apply(null,n),this.props.onDebouncedItemChange&&(clearInterval(this.interval),this.interval=null)}},{key:"getCursorPosition",value:function(e){var t=this.canvas.getBoundingClientRect(),n=t.top,o=t.left;return[e.clientX-o,e.clientY-n]}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,o=t.height,a=t.canvasClassName;return l.a.createElement("canvas",{ref:function(t){e.canvasRef=t},className:a,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseOut:this.onMouseUp,onMouseUp:this.onMouseUp,width:n,height:o})}}]),t}(a.Component);E.defaultProps={width:500,height:500,color:"#000",size:5,fillColor:"",fillText:"",canvasClassName:"canvas",debounceTime:1e3,animate:!0,tool:g,toolsMap:y};var M=n(249),x=n.n(M)()("ws://127.0.0.1:12346"),C=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).socket=null,n.state={tool:g,size:2,color:"#000000",fill:!1,fillColor:"#444444",filltext:b,items:[]},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.on("addItem",function(t){return e.setState({items:e.state.items.concat([t])})})}},{key:"render",value:function(){var e=this,t=this.state,n=t.tool,o=t.size,a=t.color,i=t.fill,r=t.fillColor,s=t.filltext,c=t.items;return l.a.createElement("div",{style:{marginTop:-100,marginBottom:0}},l.a.createElement("h2",null,"React SketchPad"),l.a.createElement("div",{style:{float:"left",marginRight:20,marginTop:-20}},l.a.createElement(E,{width:500,height:500,animate:!0,size:o,color:a,fillColor:i?r:"",fillText:s,items:c,tool:n,onCompleteItem:function(e){return x.emit("addItem",e)}})),l.a.createElement("div",{style:{float:"left"}},l.a.createElement("div",{className:"tools",style:{marginBottom:20}},l.a.createElement("button",{style:n==g?{fontWeight:"bold"}:void 0,className:n==g?"item-active":"item",onClick:function(){return e.setState({tool:g})}},"Pencil"),l.a.createElement("button",{style:"line"==n?{fontWeight:"bold"}:void 0,className:"line"==n?"item-active":"item",onClick:function(){return e.setState({tool:"line"})}},"Line"),l.a.createElement("button",{style:"ellipse"==n?{fontWeight:"bold"}:void 0,className:"ellipse"==n?"item-active":"item",onClick:function(){return e.setState({tool:"ellipse"})}},"Ellipse"),l.a.createElement("button",{style:"rectangle"==n?{fontWeight:"bold"}:void 0,className:"rectangle"==n?"item-active":"item",onClick:function(){return e.setState({tool:"rectangle"})}},"Rectangle"),l.a.createElement("button",{style:"text"==n?{fontWeight:"bold"}:void 0,className:"text"==n?"item-active":"item",onClick:function(){return e.setState({tool:"text"})}},"Text")),l.a.createElement("div",{className:"options",style:{marginBottom:20}},l.a.createElement("label",{htmlFor:""},"size: "),l.a.createElement("input",{min:"1",max:"20",type:"range",value:o,onChange:function(t){return e.setState({size:parseInt(t.target.value)})}})),l.a.createElement("div",{className:"options",style:{marginBottom:20}},l.a.createElement("label",{htmlFor:""},"color: "),l.a.createElement("input",{type:"color",value:a,onChange:function(t){return e.setState({color:t.target.value})}})),"ellipse"==this.state.tool||"rectangle"==this.state.tool?l.a.createElement("div",null,l.a.createElement("label",{htmlFor:""},"fill in:"),l.a.createElement("input",{type:"checkbox",value:i,style:{margin:"0 8"},onChange:function(t){return e.setState({fill:t.target.checked})}}),i?l.a.createElement("span",null,l.a.createElement("label",{htmlFor:""},"with color:"),l.a.createElement("input",{type:"color",value:r,onChange:function(t){return e.setState({fillColor:t.target.value})}})):""):"","text"==this.state.tool?l.a.createElement("div",null,l.a.createElement("label",{htmlFor:""},"Text:"),l.a.createElement("input",{type:"text",value:s,style:{margin:"0 8"},onChange:function(t){return e.setState({filltext:t.target.value})}})):""))}}]),t}(a.Component),k=n(165),w=n(577),O=n(581),j=n(582),D=n(579),I=n(583),T=n(585),S=n(580),N=n(586),z=n(584),P=n(161),W=n(253),R=n.n(W),U=n(254),B=n.n(U),F=n(164),H=n.n(F),J=n(162),L=n.n(J),A=n(163),X=n.n(A),G=n(255),Y=n.n(G),$=Object(w.a)(function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(f.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(f.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(P.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(P.fade)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(f.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:Object(f.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(f.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}});var q=function(){var e=$(),t=l.a.useState(null),n=Object(k.a)(t,2),o=n[0],a=n[1],i=l.a.useState(null),r=Object(k.a)(i,2),s=r[0],c=r[1],u=Boolean(o),p=Boolean(s);function m(e){a(e.currentTarget)}function h(){c(null)}function d(){a(null),h()}var f=l.a.createElement(z.a,{anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:d},l.a.createElement(N.a,{onClick:d},"Profile"),l.a.createElement(N.a,{onClick:d},"My account")),v=l.a.createElement(z.a,{anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:p,onClose:h},l.a.createElement(N.a,null,l.a.createElement(D.a,{color:"inherit"},l.a.createElement(S.a,{badgeContent:4,color:"secondary"},l.a.createElement(L.a,null))),l.a.createElement("p",null,"Messages")),l.a.createElement(N.a,null,l.a.createElement(D.a,{color:"inherit"},l.a.createElement(S.a,{badgeContent:11,color:"secondary"},l.a.createElement(X.a,null))),l.a.createElement("p",null,"Notifications")),l.a.createElement(N.a,{onClick:m},l.a.createElement(D.a,{color:"inherit"},l.a.createElement(H.a,null)),l.a.createElement("p",null,"Profile")));return l.a.createElement("div",{className:e.grow},l.a.createElement(O.a,{position:"static"},l.a.createElement(j.a,null,l.a.createElement(D.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"Open drawer"},l.a.createElement(R.a,null)),l.a.createElement(I.a,{className:e.title,variant:"h6",noWrap:!0},"Material-UI"),l.a.createElement("div",{className:e.search},l.a.createElement("div",{className:e.searchIcon},l.a.createElement(B.a,null)),l.a.createElement(T.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput}})),l.a.createElement("div",{className:e.grow}),l.a.createElement("div",{className:e.sectionDesktop},l.a.createElement(D.a,{color:"inherit"},l.a.createElement(S.a,{badgeContent:4,color:"secondary"},l.a.createElement(L.a,null))),l.a.createElement(D.a,{color:"inherit"},l.a.createElement(S.a,{badgeContent:17,color:"secondary"},l.a.createElement(X.a,null))),l.a.createElement(D.a,{edge:"end","aria-owns":u?"material-appbar":void 0,"aria-haspopup":"true",onClick:m,color:"inherit"},l.a.createElement(H.a,null))),l.a.createElement("div",{className:e.sectionMobile},l.a.createElement(D.a,{"aria-haspopup":"true",onClick:function(e){c(e.currentTarget)},color:"inherit"},l.a.createElement(Y.a,null))))),f,v)};var K=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(q,null),l.a.createElement("header",{className:"App-header"},l.a.createElement(C,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[258,1,2]]]);
//# sourceMappingURL=main.2a03753c.chunk.js.map